<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Music Visualizer in C++ Using OpenGL Part 1 &#8211; Anand's Blog</title>
<meta name="description" content="For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL.">
<meta name="keywords" content="C++, OpenGL">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Music Visualizer in C++ Using OpenGL Part 1">
<meta name="twitter:description" content="For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL.">
<meta name="twitter:site" content="@indrajithtweet">
<meta name="twitter:creator" content="@indrajithtweet">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://AnandNautiyal23.github.io/images/matrix-logo-2.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Music Visualizer in C++ Using OpenGL Part 1">
<meta property="og:description" content="For the given input audio file (.wav) the program will give the real time audio spectrum by performing Fast Fourier Transform (FFT) on the audio samples and plot the graph using OpenGL.">
<meta property="og:url" content="http://AnandNautiyal23.github.io/blog/music-visualizer-in-c-using-opengl-part-1/">
<meta property="og:site_name" content="Anand's Blog">





<link rel="canonical" href="http://AnandNautiyal23.github.io/blog/music-visualizer-in-c-using-opengl-part-1/">
<link href="http://AnandNautiyal23.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Anand's Blog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://AnandNautiyal23.github.io/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://AnandNautiyal23.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://AnandNautiyal23.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://AnandNautiyal23.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://AnandNautiyal23.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://AnandNautiyal23.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://AnandNautiyal23.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://AnandNautiyal23.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://AnandNautiyal23.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://AnandNautiyal23.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://AnandNautiyal23.github.io/" >Home</a></li>
		  
		    
		    <li><a href="http://AnandNautiyal23.github.io/portfolio/" >Portfolio</a></li>
		  
		    
		    <li><a href="http://AnandNautiyal23.github.io/resume/" >Resume</a></li>
		  
		    
		    <li><a href="http://AnandNautiyal23.github.io/about/" >About</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://AnandNautiyal23.github.io/" class="site-logo" rel="home" title="Anand's Blog"><img src="http://AnandNautiyal23.github.io/images/matrix-logo-2.png" width="200" height="200" alt="Anand's Blog logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://AnandNautiyal23.github.io/">Anand's Blog</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">My Experiments With Computer.</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="http://AnandNautiyal23.github.io/tags/#C++" title="Pages tagged C++">C++</a></li><li><a href="http://AnandNautiyal23.github.io/tags/#OpenGL" title="Pages tagged OpenGL">OpenGL</a></li>
        </ul>
        
          <h1 class="entry-title">Music Visualizer in C++ Using OpenGL Part 1</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="http://AnandNautiyal23.github.io/images/bio.jpg" class="bio-photo" alt="Indrajith Indraprastham bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Indrajith Indraprastham</span></span>
        <span class="entry-date date published"><time datetime="2016-05-25T21:01:43+05:30"><i class="fa fa-calendar-o"></i> May 25, 2016</time></span>
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        
        
      </footer>
      <div class="entry-content">
        <p><img src="/images/spectrum.gif" alt="Audio Visualizer" title="Screenshot of spectrum" /></p>

<h1 id="audio-visualizer">Audio Visualizer</h1>

<p>For the given input audio file <strong>(.wav)</strong> the program will give the <strong>real time audio spectrum</strong> by performing <strong>Fast Fourier Transform (FFT)</strong> on the audio samples and plot the graph using <strong>OpenGL</strong>.
This Project is implemented in C++ using OpenGL. Three frameworks <strong>Aquila-dsp</strong>, <strong>Kiss-Fft</strong>, and <strong>SFML</strong> are used to perform audio sampling, fast fourier transform and audio playback respectively. The development and testing of this project is done on <strong>Linux (ubuntu)</strong> using 4.2.0-16-generic Kernel. Interface for the program is given with the help of keyboard.</p>

<h2 id="frameworks--apis-used">Frameworks / APIs used</h2>
<ol>
  <li>The following c++ frameworks are used in this project.
 2 Simple and Fast Multimedia Library (SFML)</li>
  <li>Aquila-dsp</li>
  <li>Kiss-fft</li>
  <li>OpenGL</li>
</ol>

<h2 id="minimum-requirements">Minimum requirements:</h2>
<p>The development of the project was done with these requirements. The can support lower versions also. It has not been tested.</p>

<ul>
  <li>C++ compiler : g++ with c++11 support (-std=gnu++11) (version &gt;= 5.2.1)</li>
  <li>OpenGL (version &gt;=v4.5)</li>
  <li>Aquila-dsp framework (version &gt;=v3.0)</li>
  <li>Kiss-fft Framework (version &gt;=v1.3.0)</li>
  <li>SFML framework  &gt;=2.3.2</li>
  <li>Git &gt;=v2.5.0</li>
</ul>

<h2 id="keys-used">Keys Used:</h2>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Use `Left/Right` to move horizontally.
        Use `Up/Down` to change the horizontal scale.
        Use `Home` button to reset the position and scale.
        Press ` F7 ` to toggle interpolation.
        Press  `F8` to toggle clamping.
Press `F9` to toggle drawing points.
        Press `q` to exit the program.
        Press `p` to to toggle audio play/pause.
        Press `r` to reload audio and play from the beginning.    
Press `right arrow` to seek audio forward by 5 seconds and move +ve x axis.
Press `left arrow` to seek audio backward by 5 seconds and move -ve x axis.
Press `down arrow` to decrease scale/1.5.
Press `up arrow` to increase scale*1.5.</code></pre></figure>

<h2 id="algorithm">Algorithm</h2>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Step 1: Begin
		Int framePointer = 0, N = 32768.
Step 2: Load input audio file and play it using the audio Library
Step 3: For i = framePointer to →  framePointer + N &lt; total_samples_count
		Collect N samples from the audio file 
Step 4: Apply suitable window function (e.g. Hann aka Hanning window)
Step 5: Apply Fast Fourier transform (FFT) on the array elements and collect N/2 
		Complex numbers having real part and imaginary part. 
		(NB: if using typical complex-to-complex FFT then set imaginary parts 
		of input array to zero)
Step 6: Calculate the magnitude of N/2FFT data.
		magnitude = sqrt(re * re +img *img) 
Step 7: Convert magnitude to dB (log)scale. (optional)
		20 * log10(magnitude)
Step 8: Plot N/2  log(magnitude)values.
Step 9: If N &gt;= total_samples_count 
        Exit. 
        Else goto Step 3.
Step 10: End.</code></pre></figure>

<h2 id="flow-chart">Flow Chart</h2>
<p><img src="/flowchart.png" alt="Flow Chart" title="Flowchart" /></p>

<h2 id="compiling-the-frameworks">Compiling the frameworks</h2>

<h2 id="aquila-dsp">Aquila-dsp:</h2>
<p><strong>Prerequisites</strong></p>

<p>CMake: Aquila relies on CMake as a build tool, so make sure you have it installed (version 2.8 or later)
Clone repository.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git clone git://github.com/zsiciarz/aquila.git aquila-src
</code></pre>
</div>
<p><strong>Buid</strong></p>

<p>Where to build:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>a-top-level-directory/
   aquila-build/
   aquila-src/
</code></pre>
</div>
<p>In directory you have to build do</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cmake ..\aquila-src
    -DCMAKE_INSTALL_PREFIX=”~/home/mylib”
make
make install
</code></pre>
</div>
<p><strong>SFLM:</strong></p>

<p>Installing SFML is simple. You need administrative privilege on the machine</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo apt-get install libsfml-dev
</code></pre>
</div>
<p><strong>Kiss FFT</strong></p>

<p>There is no need to build kiss-fft. You need to add their files while compiling</p>

<h2 id="compiling-and-running">Compiling and running</h2>

<p>For easy compilation use the script <code class="highlighter-rouge">./compile</code> from the project directory</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">g++ -std<span class="o">=</span>c++11 -c draw.cpp
g++ -std<span class="o">=</span>gnu++11 draw.o  <span class="se">\</span>
kiss_fft130/kiss_fft.c  <span class="se">\</span>
-L /home/&lt;YourUserName&gt;/mylib/lib/ <span class="se">\</span>
-lAquila -lOoura_fft -lm <span class="se">\</span>
-lglut -lGLEW -lGL -lGLU  <span class="se">\</span>
-lfreetype -lsfml-system <span class="se">\</span>
-lsfml-audio  ./common/shader_utils.o <span class="se">\</span>
-o draw
To run the project: 
./draw &lt;audio-input&gt;</code></pre></figure>

<p><strong><a href="/blog/music-visualizer-in-c-using-opengl-part-2/">» Part 2</a></strong></p>

<p><strong><a href="https://github.com/indrajithi/Audio-Visualizer">Full Source Code.</a></strong></p>

        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'indrajith'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://AnandNautiyal23.github.io/jumble_words_solver_in_python/" class="btn" title="Jumble Words solver using Python.">Previous</a>
      
      
        <a href="http://AnandNautiyal23.github.io/blog/music-visualizer-in-c-using-opengl-part-2/" class="btn" title="Music Visualizer in C++ Using OpenGL Part 2">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->



<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span><img src="https://mirrors.creativecommons.org/presskit/icons/cc.large.png" style="width:20px;height:20px;"> 2018  Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll.</a> </span>
<div class="social-icons">
	<a href="https://twitter.com/indrajithtweet" title="Indrajith Indraprastham on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://facebook.com/indrajithi" title="Indrajith Indraprastham on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	
	<a href="https://linkedin.com/in/indrajith-indraprastham/" title="Indrajith Indraprastham on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="https://stackoverflow.com/users/2337276/indrajith" title="Indrajith Indraprastham on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	<a href="https://instagram.com/indrajith_indraprastham" title="Indrajith Indraprastham on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	
	<a href="https://github.com/indrajithi" title="Indrajith Indraprastham on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://AnandNautiyal23.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://AnandNautiyal23.github.io';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://AnandNautiyal23.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://AnandNautiyal23.github.io/assets/js/scripts.min.js"></script>




</body>
</html>
